{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "required": ["targets", "condition_factors", "reference_spacing_bounds_m", "response_model"],
  "properties": {
    "targets": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": ["group", "pod_ceiling", "base_reference_spacing_m", "spacing_exponent_k"],
        "properties": {
          "group": { "type": "string" },
          "pod_ceiling": { "type": "number", "minimum": 0, "maximum": 1 },
          "base_reference_spacing_m": { "type": "number", "exclusiveMinimum": 0 },
          "spacing_exponent_k": { "type": "number", "exclusiveMinimum": 0 }
        }
      }
    },
    "condition_factors": {
      "type": "object",
      "required": ["time_of_day", "weather", "detectability_level"],
      "properties": {
        "time_of_day": { "type": "object", "additionalProperties": { "type": "object", "additionalProperties": { "type": "number" } } },
        "weather": { "type": "object", "additionalProperties": { "type": "object", "additionalProperties": { "type": "number" } } },
        "detectability_level": { "type": "object", "additionalProperties": { "type": "object", "additionalProperties": { "type": "number" } } }
      }
    },
    "reference_spacing_bounds_m": {
      "type": "object",
      "required": ["min_by_target", "max_by_target"],
      "properties": {
        "min_by_target": { "type": "object", "additionalProperties": { "type": "number", "minimum": 0 } },
        "max_by_target": { "type": "object", "additionalProperties": { "type": "number", "exclusiveMinimum": 0 } }
      }
    },
    "response_model": {
      "type": "object",
      "required": ["max_total_multiplier", "auditory_bonus", "visual_bonus"],
      "properties": {
        "enabled_for_groups": { "type": "array", "items": { "type": "string" } },
        "max_total_multiplier": { "type": "number", "minimum": 1 },
        "auditory_bonus": { "type": "object", "additionalProperties": { "type": "number" } },
        "visual_bonus": { "type": "object", "additionalProperties": { "type": "number" } }
      }
    },
    "completion_model": {
      "type": "object",
      "properties": {
        "use_strict_subtractive_formula": { "type": "boolean" }
      }
    },
    "qa_flags": {
      "type": "object",
      "additionalProperties": { "type": "boolean" }
    }
  }
}
